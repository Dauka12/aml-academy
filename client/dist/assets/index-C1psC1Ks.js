import{a as L,r as n,i as M,f as B,u as T,c as z,j as e,H as F,F as H,d as g,e as x}from"./index-D4Bdz1nj.js";function W(){const{styles:c,open:O,setOpen:h,checkStyle:R,userEntry:A}=L(),[j,f]=n.useState([]),[N,p]=n.useState(null),[a,w]=n.useState(null),[v,i]=n.useState(!0),r=M.language,{id:u}=B(),{t:m}=T(),b=z(),y=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],k=s=>{b(`/news-page/${s}`)};n.useEffect(()=>{window.scrollTo(0,0)},[]);const E=s=>{p(s)};n.useEffect(()=>{const s=t=>{const o=document.getElementById("Modal"),l=document.getElementsByTagName("button");o&&!o.contains(t.target)&&!Array.from(l).some(d=>d===t.target)&&E(null)};return document.addEventListener("click",s),()=>{document.removeEventListener("click",s)}},[N]),n.useEffect(()=>{(async()=>{try{const t=await g.get(`${x}/api/aml/course/getAllNewsByLang/${r==="kz"?"kz":r==="eng"?"eng":"ru"}`);f(t.data)}catch(t){console.error(t)}})()},[r,m]),n.useEffect(()=>{(async()=>{try{i(!0);const t=await g.get(`${x}/api/aml/course/getNewsById/${r==="kz"?"kz":r==="eng"?"eng":"ru"}`,{params:{id:u}});w(t.data)}catch(t){console.error(t)}finally{i(!1)}})()},[r,u,m]),n.useEffect(()=>{console.log("Current Language:",r)},[r]);const S=()=>{h(s=>!s)},D=s=>{const t=new Date(s.date),o=t.getDate(),l=t.getMonth(),d=y[l],$=t.getHours(),I=t.getMinutes(),C=`${o} ${d} ${$.toString().padStart(2,"0")}:${I.toString().padStart(2,"0")}`;return e.jsx("div",{className:"cardContainer",onClick:()=>k(s.id),children:e.jsxs("div",{className:"cardContent",children:[e.jsx("p",{className:"cardTitle",children:s.name}),e.jsx("div",{className:"dateContent",children:e.jsx("div",{className:"date",children:e.jsx("p",{className:"dateTime",children:C})})})]})},s.id)};return v?e.jsx("div",{children:"Loading..."}):a?e.jsxs("div",{className:"vebinars-page text-content",style:{background:c.colorMode==="dark"?"#000":c.colorMode==="light"?"#f2f2f2":c.colorMode==="blue"?"#9dd1ff":"#000"},children:[e.jsx(F,{dark:c.colorMode!=="dark",handleOpenVisualModal:S}),e.jsx("div",{className:"page-content container",children:e.jsxs("div",{className:"news-layout",children:[a&&e.jsxs("div",{className:"latestNews",children:[e.jsx("br",{}),e.jsx("h2",{className:"latestNewsTitle",children:a.name}),e.jsx("br",{}),a.image&&e.jsxs("div",{className:"latestNewsImgWrapper",children:[e.jsx("div",{className:"blurred-bg",style:{backgroundImage:`url(${a.image})`}}),e.jsx("img",{src:a.image,alt:"",className:"latestNewsImg"})]}),a==null?void 0:a.description.map((s,t)=>e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"latestNewsText",children:s.description},t),e.jsx("br",{}),e.jsxs("div",{className:"latestNewsImgWrapper",children:[e.jsx("div",{className:"blurred-bg",style:{backgroundImage:`url(${s.image})`}}),e.jsx("img",{src:s.image,alt:"",className:"latestNewsImg"})]}),e.jsx("br",{}),e.jsx("br",{})]}))]}),e.jsxs("div",{className:"otherNews",children:[e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),j.filter(s=>s.id!==(a==null?void 0:a.id)).slice(0,6).map(s=>D(s))]})]})}),e.jsx(H,{})]}):e.jsx("div",{children:"No news found."})}export{W as default};
