import{j as s,r as n,x as w,b,c as F,au as q,ap as y,f as V,aw as A}from"./index-D4Bdz1nj.js";import{n as E,s as $,a as z,m as L,i as D,T as P,t as _,A as B,q as H,f as K}from"./index-CvNqWLfw.js";import{a as M}from"./index.esm-CVgTggFh.js";/* empty css              */import"./AccordionSummary-Cnng06IV.js";import"./index-wtVaOsNE.js";import"./Divider-DeD64mju.js";import"./white-man-D-S9VVWr.js";import"./Carousel_19-C89214jQ.js";function Q({children:e}){return s.jsxs("div",{className:"finish-success animate-modal",children:[s.jsx(M,{}),s.jsx("div",{children:e})]})}const R=({images:e=[]})=>{const[t,l]=n.useState(0),[o,r]=n.useState(0),[d,c]=n.useState("next"),[m,u]=n.useState(0);n.useEffect(()=>{(e==null?void 0:e.length)===0&&console.warn("No images provided to ImageCarousel.")},[e]);const h=()=>{r(t),l(a=>a===0?(e==null?void 0:e.length)-1:a-1),c("prev"),u(a=>a+1)},j=()=>{r(t),l(a=>a===(e==null?void 0:e.length)-1?0:a+1),c("next"),u(a=>a+1)};return(e==null?void 0:e.length)===0?s.jsx("div",{className:"carousel-container",children:"No images to display"}):s.jsxs("div",{className:"carousel-wrapper",children:[s.jsx("div",{className:"carousel-header",children:e[t].header}),s.jsxs("div",{className:"carousel-container",children:[s.jsx("button",{className:"carousel-button left",onClick:h,children:"<"}),s.jsxs("div",{className:"carousel-image-container",children:[s.jsx("img",{src:e[o].src,alt:`Slide ${o}`,className:`carousel-image ${d==="next"?"slide-out-left":"slide-out-right"}`}),s.jsx("img",{src:e[t].src,alt:`Slide ${t}`,className:`carousel-image ${d==="next"?"slide-in-right":"slide-in-left"}`})]},m),s.jsx("button",{className:"carousel-button right",onClick:j,children:">"}),s.jsx("div",{className:"carousel-indicators",children:e.map((a,f)=>s.jsx("div",{className:`indicator ${f===t?"active":""}`},f))}),s.jsxs("div",{className:"carousel-counter",children:[t+1," / ",e==null?void 0:e.length]})]})]})};function g({questions:e}){return s.jsx("div",{className:"game-quiz",children:e.map((t,l)=>s.jsx(G,{question:t.question,answers:t.answers},l))})}const G=({question:e,answers:t})=>{const[l,o]=n.useState(null);return s.jsxs("div",{className:"question",children:[s.jsx("div",{className:"question-text",children:e}),s.jsx("div",{className:"answers",children:t.map((r,d)=>s.jsxs("div",{className:`${l===r?"active":""}`,children:[s.jsx("span",{onClick:c=>{o(r)},children:l===r?s.jsx(w,{}):null}),s.jsx("div",{children:r})]},d))})]})},U=({formData:e,questions:t,handleFinished:l,handleSubmit:o,levelId:r,subLevelId:d,taskId:c})=>{const m=b(),u=F(),[h,j]=n.useState(e.sections.map(i=>i.fields?i.fields.map(()=>""):[])),[a,f]=n.useState(!1),[J,S]=n.useState(!1),k=(i,v,p)=>{const x=[...h];x[i][v]=p,j(x);const N=x.flat().every(T=>T.trim()!=="");f(N)},C=()=>{m(E(u))};n.useEffect(()=>{a||S(!0),a&&S(!1)},[a]);const I=()=>{l(),C(),o("talon",!0),console.log(r,d,c)};return s.jsxs("div",{className:"vertical-tabs-form-quiz",children:[e.sections.map((i,v)=>s.jsxs("div",{children:[s.jsx("div",{className:"title",children:i.title}),s.jsx("div",{className:"inner",children:s.jsxs("div",{className:"left",children:[i.fields&&i.fields.map((p,x)=>s.jsxs("div",{className:"form-item",children:[s.jsx("label",{children:p.label}),s.jsx("input",{type:p.type,value:h[v][x],onChange:N=>k(v,x,N.target.value)})]},x)),i.quizComponent&&s.jsx(g,{questions:t})]})})]},v)),s.jsx(q,{handling:I,setDisabled:f})]})},W=B(U);function ls(){const[e,t]=n.useState(!1),[l,o]=n.useState(0),{tasks:r,currentTaskIndex:d}=y(a=>a.tasks),c=r[d],m=b(),{level:u,subLevel:h}=V();n.useEffect(()=>{m($({levelId:Number(u),subLevelId:Number(h)})),z()},[u,h,m]),n.useEffect(()=>{t(L[0].status==="finished")},[]);function j(){t(!0),o(1),setTimeout(()=>{t(!1)},2e3)}return s.jsxs(s.Fragment,{children:[s.jsx("h2",{children:"Презентация портала e-lisence"}),s.jsx(R,{images:D}),s.jsx(P,{transcripts:_}),s.jsx(A,{height:40}),c==null?void 0:c.content,s.jsx(W,{formData:K,questions:H,handleFinished:j,count:l,levelId:1,subLevelId:1,taskId:1}),e?s.jsx(Q,{children:"Вы успешно получили свой талон!"}):null]})}export{ls as default};
