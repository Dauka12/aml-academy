const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Registration-QKX-REef.js","assets/index-CWPAtMRT.js","assets/index-D_X_iv3g.css","assets/LanguageToggle-CI2z1TyJ.js","assets/Tooltip-D5k-UFCN.js","assets/useOlympiadStore-ErJtcenK.js","assets/VisibilityOff-GbgglnEp.js","assets/Visibility-fa_KzF1E.js","assets/Container-D7Kqj5xH.js","assets/Login-D4LFH9Gz.js","assets/Alert-B32ZBNp2.js","assets/Dashboard-BQVyrdGH.js","assets/useExamManager-C7Ln9q0H.js","assets/dateUtils-CDTve7xg.js","assets/CardContent-BcJgvWrU.js","assets/useTestSessionManager-OPsabaX4.js","assets/Divider-DGSKBwkV.js","assets/QuizOutlined-BWWHIyni.js","assets/LandingPage-B09qsISs.js","assets/OlympiadManager-BwQzaHkz.js","assets/AccordionSummary-D7U_clwu.js","assets/Radio-Cyy3ibt8.js","assets/TestsList-Civlt0pM.js","assets/TestSession-D90zAePt.js","assets/ArrowBack-Bn_KyZo2.js","assets/TestResults-DZG-_Q11.js"])))=>i.map(i=>d[i]);
import{d as m,as as g,cP as t,az as M,j as n,aA as N,r as o,v as b,cQ as q,ap as J,cR as H,cS as i,aD as c}from"./index-CWPAtMRT.js";const D="https://amlacademy.kz",P=m.create({baseURL:`${D}/api/olympiad`,headers:{"Content-Type":"application/json"}});P.interceptors.request.use(a=>{const e=localStorage.getItem("olympiad_token");return e&&(a.headers.Authorization=`Bearer ${e}`),a},a=>Promise.reject(a));const G=async a=>{var e,r;try{return(await P.post("/auth/register",a)).data}catch(s){throw m.isAxiosError(s)?new Error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.message)||"Registration failed"):new Error("Registration failed")}},X=async a=>{var e,r;try{return(await P.post("/auth/login",a)).data}catch(s){throw m.isAxiosError(s)?new Error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.message)||"Ошибка авторизации"):s}},Y=()=>{localStorage.removeItem("olympiad_token"),localStorage.removeItem("olympiad_user")},y={isAuthenticated:!1,user:null,token:null,loading:!1,error:null},F=localStorage.getItem("olympiad_token"),x=localStorage.getItem("olympiad_user");if(F&&x&&x!=="undefined")try{y.isAuthenticated=!0,y.token=F,y.user=JSON.parse(x)}catch{localStorage.removeItem("olympiad_token"),localStorage.removeItem("olympiad_user")}const f=t("olympiadAuth/login",async(a,{rejectWithValue:e})=>{try{const r=await X(a);return localStorage.setItem("olympiad_token",r.token),localStorage.setItem("olympiad_user",JSON.stringify(r)),r}catch(r){return r instanceof Error?e(r.message):e("Неизвестная ошибка")}}),Z=t("olympiadAuth/logout",async()=>(Y(),null)),z=g({name:"olympiadAuth",initialState:y,reducers:{clearAuthError:a=>{a.error=null}},extraReducers:a=>{a.addCase(f.pending,e=>{e.loading=!0,e.error=null}).addCase(f.fulfilled,(e,r)=>{const{token:s,...d}=r.payload;e.isAuthenticated=!0,e.user=d,e.token=s,e.loading=!1,e.error=null}).addCase(f.rejected,(e,r)=>{e.loading=!1,e.error=r.payload||"Ошибка авторизации"}).addCase(Z.fulfilled,e=>{e.isAuthenticated=!1,e.user=null,e.token=null,e.error=null})}}),{clearAuthError:Oe}=z.actions,V=z.reducer,W=`${D}/api/olympiad`,l=m.create({baseURL:W,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(a=>{const e=localStorage.getItem("olympiad_token");return e&&(a.headers.Authorization=`Bearer ${e}`),a},a=>Promise.reject(a));const ee=async a=>{var e,r;try{return(await l.post("/exam/create",a)).data}catch(s){throw new Error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.message)||"Ошибка при создании экзамена")}},re=async()=>{var a,e;try{return(await l.get("/exam/all")).data}catch(r){throw new Error(((e=(a=r.response)==null?void 0:a.data)==null?void 0:e.message)||"Ошибка при получении списка экзаменов")}},ae=async a=>{var e,r;try{return(await l.get(`/exam/${a}`)).data}catch(s){throw new Error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.message)||"Ошибка при получении экзамена")}},se=async a=>{var e,r;try{await l.delete(`/exam/${a}`)}catch(s){throw new Error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.message)||"Ошибка при удалении экзамена")}},ne=async(a,e)=>{var r,s;try{return(await l.post(`/exam-question/create/${e}`,a)).data}catch(d){throw new Error(((s=(r=d.response)==null?void 0:r.data)==null?void 0:s.message)||"Ошибка при создании вопроса")}},oe=async(a,e)=>{var r,s;try{await l.patch(`/exam-question/${e}`,a)}catch(d){throw new Error(((s=(r=d.response)==null?void 0:r.data)==null?void 0:s.message)||"Ошибка при обновлении вопроса")}},te=async a=>{var e,r;try{await l.delete(`/exam-question/${a}`)}catch(s){throw new Error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.message)||"Ошибка при удалении вопроса")}},Fe=async()=>{var a,e;try{return(await l.get("/exam/all-categories")).data}catch(r){throw new Error(((e=(a=r.response)==null?void 0:a.data)==null?void 0:e.message)||"Ошибка при получении категорий")}},de={exams:[],currentExam:null,currentQuestion:null,loading:!1,error:null},h=t("olympiadExam/fetchAll",async(a,{rejectWithValue:e})=>{try{return await re()}catch(r){return r instanceof Error?e(r.message):e("Failed to fetch exams")}}),E=t("olympiadExam/fetchById",async(a,{rejectWithValue:e})=>{try{return await ae(a)}catch(r){return r instanceof Error?e(r.message):e("Failed to fetch exam")}}),w=t("olympiadExam/create",async(a,{rejectWithValue:e})=>{try{return await ee(a)}catch(r){return r instanceof Error?e(r.message):e("Failed to create exam")}}),S=t("olympiadExam/delete",async(a,{rejectWithValue:e})=>{try{return await se(a),a}catch(r){return r instanceof Error?e(r.message):e("Failed to delete exam")}}),_=t("olympiadExam/createQuestion",async({questionData:a,testId:e},{rejectWithValue:r})=>{try{return await ne(a,e)}catch(s){return s instanceof Error?r(s.message):r("Failed to create question")}}),j=t("olympiadExam/updateQuestion",async({questionData:a,id:e},{rejectWithValue:r})=>{try{return await oe(a,e),{...a,id:e}}catch(s){return s instanceof Error?r(s.message):r("Failed to update question")}}),C=t("olympiadExam/deleteQuestion",async(a,{rejectWithValue:e})=>{try{return await te(a),a}catch(r){return r instanceof Error?e(r.message):e("Failed to delete question")}}),U=g({name:"olympiadExam",initialState:de,reducers:{setCurrentExam:(a,e)=>{a.currentExam=e.payload},setCurrentQuestion:(a,e)=>{a.currentQuestion=e.payload},clearError:a=>{a.error=null}},extraReducers:a=>{a.addCase(h.pending,e=>{e.loading=!0,e.error=null}).addCase(h.fulfilled,(e,r)=>{e.loading=!1,e.exams=r.payload}).addCase(h.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(E.pending,e=>{e.loading=!0,e.error=null}).addCase(E.fulfilled,(e,r)=>{e.loading=!1,e.currentExam=r.payload}).addCase(E.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(w.pending,e=>{e.loading=!0,e.error=null}).addCase(w.fulfilled,(e,r)=>{e.loading=!1,e.exams=[...e.exams,r.payload]}).addCase(w.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(S.pending,e=>{e.loading=!0,e.error=null}).addCase(S.fulfilled,(e,r)=>{e.loading=!1,e.exams=e.exams.filter(s=>s.id!==r.payload),e.currentExam&&e.currentExam.id===r.payload&&(e.currentExam=null)}).addCase(S.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(_.pending,e=>{e.loading=!0,e.error=null}).addCase(_.fulfilled,(e,r)=>{e.loading=!1,e.currentExam&&(e.currentExam={...e.currentExam,questions:[...e.currentExam.questions||[],r.payload]})}).addCase(_.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(j.pending,e=>{e.loading=!0,e.error=null}).addCase(j.fulfilled,(e,r)=>{e.loading=!1,e.currentExam&&e.currentExam.questions&&(e.currentExam={...e.currentExam,questions:e.currentExam.questions.map(s=>s.id===r.payload.id?{...s,...r.payload}:s)})}).addCase(j.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(C.pending,e=>{e.loading=!0,e.error=null}).addCase(C.fulfilled,(e,r)=>{e.loading=!1,e.currentExam&&e.currentExam.questions&&(e.currentExam={...e.currentExam,questions:e.currentExam.questions.filter(s=>s.id!==r.payload)})}).addCase(C.rejected,(e,r)=>{e.loading=!1,e.error=r.payload})}}),{setCurrentExam:$e,clearError:be}=U.actions,ie=U.reducer,le={isLoading:!1,success:!1,error:null},A=t("olympiadRegistration/register",async(a,{rejectWithValue:e})=>{try{return await G(a)}catch(r){return r instanceof Error?e(r.message):e("Unknown error occurred")}}),ce=g({name:"olympiadRegistration",initialState:le,reducers:{resetRegistration:a=>{a.success=!1,a.error=null}},extraReducers:a=>{a.addCase(A.pending,e=>{e.isLoading=!0,e.error=null}).addCase(A.fulfilled,e=>{e.isLoading=!1,e.success=!0,e.error=null}).addCase(A.rejected,(e,r)=>{e.isLoading=!1,e.success=!1,e.error=r.payload||"Registration failed"})}}),ue=ce.reducer,pe=`${D}/api/olympiad/exam/session`,u=m.create({baseURL:pe,headers:{"Content-Type":"application/json"}});u.interceptors.request.use(a=>{const e=localStorage.getItem("olympiad_token");return e&&(a.headers.Authorization=`Bearer ${e}`),a},a=>Promise.reject(a));const me=async a=>{var e,r;try{return(await u.post("/start",a)).data}catch(s){throw new Error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to start exam session")}},ye=async a=>{var e,r;try{return(await u.post(`/end/${a}`)).data}catch(s){throw new Error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to end exam session")}},ge=async a=>{var e,r;try{return(await u.post(`/student/${a}`)).data}catch(s){throw new Error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to retrieve exam session")}},xe=async()=>{var a,e;try{return(await u.get("/student")).data}catch(r){throw new Error(((e=(a=r.response)==null?void 0:a.data)==null?void 0:e.message)||"Failed to retrieve exam sessions")}},fe=async a=>{var e,r;try{return(await u.post("/answer/update",a)).data}catch(s){throw new Error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to update answer")}},he=async a=>{var e,r;try{return(await u.delete("/answer/delete",{data:a})).data}catch(s){throw new Error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to delete answer")}},Ee={currentSession:null,sessions:[],loading:!1,error:null,answerUpdating:!1,answerError:null},T=t("olympiadTestSession/start",async(a,{rejectWithValue:e})=>{try{return await me(a)}catch(r){return r instanceof Error?e(r.message):e("Failed to start exam session")}}),I=t("olympiadTestSession/end",async(a,{rejectWithValue:e})=>{try{return await ye(a)}catch(r){return r instanceof Error?e(r.message):e("Failed to end exam session")}}),k=t("olympiadTestSession/getById",async(a,{rejectWithValue:e})=>{try{return await ge(a)}catch(r){return r instanceof Error?e(r.message):e("Failed to retrieve exam session")}}),R=t("olympiadTestSession/getAll",async(a,{rejectWithValue:e})=>{try{return await xe()}catch(r){return r instanceof Error?e(r.message):e("Failed to retrieve exam sessions")}}),v=t("olympiadTestSession/updateAnswer",async(a,{rejectWithValue:e})=>{try{return await fe(a),a}catch(r){return r instanceof Error?e(r.message):e("Failed to update answer")}}),L=t("olympiadTestSession/deleteAnswer",async(a,{rejectWithValue:e})=>{try{return await he(a),a}catch(r){return r instanceof Error?e(r.message):e("Failed to delete answer")}}),Q=g({name:"olympiadTestSession",initialState:Ee,reducers:{clearCurrentSession:a=>{a.currentSession=null},clearTestSessionError:a=>{a.error=null},clearAnswerError:a=>{a.answerError=null}},extraReducers:a=>{a.addCase(T.pending,e=>{e.loading=!0,e.error=null}).addCase(T.fulfilled,(e,r)=>{e.loading=!1,e.currentSession=r.payload,e.sessions.some(d=>d.id===r.payload.id)||e.sessions.push({id:r.payload.id,examData:{id:r.payload.examData.id,nameRus:r.payload.examData.nameRus,nameKaz:r.payload.examData.nameKaz,typeRus:r.payload.examData.typeRus,typeKaz:r.payload.examData.typeKaz,startTime:r.payload.examData.startTime,durationInMinutes:r.payload.examData.durationInMinutes},startTime:r.payload.startTime,endTime:r.payload.endTime})}).addCase(T.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(I.pending,e=>{e.loading=!0,e.error=null}).addCase(I.fulfilled,(e,r)=>{e.loading=!1,e.currentSession=r.payload,e.sessions=e.sessions.map(s=>s.id===r.payload.id?{...s,endTime:r.payload.endTime}:s)}).addCase(I.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(k.pending,e=>{e.loading=!0,e.error=null}).addCase(k.fulfilled,(e,r)=>{e.loading=!1,e.currentSession=r.payload}).addCase(k.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(R.pending,e=>{e.loading=!0,e.error=null}).addCase(R.fulfilled,(e,r)=>{e.loading=!1,e.sessions=r.payload}).addCase(R.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}).addCase(v.pending,e=>{e.answerUpdating=!0,e.answerError=null}).addCase(v.fulfilled,(e,r)=>{if(e.answerUpdating=!1,e.currentSession&&e.currentSession.id===r.payload.studentExamSessionId){const s=e.currentSession.examData.studentAnswer.findIndex(d=>d.questionId===r.payload.questionId);s!==-1?e.currentSession.examData.studentAnswer[s].selectedOptionId=r.payload.selectedOptionId:e.currentSession.examData.studentAnswer.push({id:Date.now(),questionId:r.payload.questionId,selectedOptionId:r.payload.selectedOptionId})}}).addCase(v.rejected,(e,r)=>{e.answerUpdating=!1,e.answerError=r.payload}).addCase(L.pending,e=>{e.answerUpdating=!0,e.answerError=null}).addCase(L.fulfilled,(e,r)=>{e.answerUpdating=!1,e.currentSession&&e.currentSession.id===r.payload.studentExamSessionId&&(e.currentSession.examData.studentAnswer=e.currentSession.examData.studentAnswer.filter(s=>s.questionId!==r.payload.questionId))}).addCase(L.rejected,(e,r)=>{e.answerUpdating=!1,e.answerError=r.payload})}}),{clearCurrentSession:qe,clearTestSessionError:ze,clearAnswerError:Ue}=Q.actions,we=Q.reducer,Se=M({reducer:{auth:V,registration:ue,exam:ie,testSession:we},devTools:!1}),B=o.createContext({isAuthenticated:!1}),_e=({children:a})=>n.jsx(N,{store:Se,children:n.jsx(je,{children:a})}),je=({children:a})=>{const{isAuthenticated:e}=J(s=>s.auth),r={isAuthenticated:e};return n.jsx(B.Provider,{value:r,children:a})},K=()=>o.useContext(B),p=({children:a})=>{const{isAuthenticated:e}=K(),r=b();return e?n.jsx(n.Fragment,{children:a}):n.jsx(q,{to:"/olympiad/login",state:{from:r},replace:!0})},$=({children:a})=>{var d,O;const{isAuthenticated:e}=K(),s=((O=(d=b().state)==null?void 0:d.from)==null?void 0:O.pathname)||"/olympiad/dashboard";return e?n.jsx(q,{to:s,replace:!0}):n.jsx(n.Fragment,{children:a})},Ce=o.lazy(()=>c(()=>import("./Registration-QKX-REef.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Ae=o.lazy(()=>c(()=>import("./Login-D4LFH9Gz.js"),__vite__mapDeps([9,1,2,3,4,10,6,7,8]))),Te=o.lazy(()=>c(()=>import("./Dashboard-BQVyrdGH.js"),__vite__mapDeps([11,1,2,12,13,14,15,5,16,17,10]))),Ie=o.lazy(()=>c(()=>import("./LandingPage-B09qsISs.js"),__vite__mapDeps([18,1,2,3,4,8,14,16]))),ke=o.lazy(()=>c(()=>import("./OlympiadManager-BwQzaHkz.js"),__vite__mapDeps([19,1,2,16,10,7,4,20,21,8]))),Re=o.lazy(()=>c(()=>import("./TestsList-Civlt0pM.js"),__vite__mapDeps([22,1,2,12,13,14,15,5,16,8,10]))),ve=o.lazy(()=>c(()=>import("./TestSession-D90zAePt.js"),__vite__mapDeps([23,1,2,24,21,15,5,8,10]))),Le=o.lazy(()=>c(()=>import("./TestResults-DZG-_Q11.js"),__vite__mapDeps([25,1,2,15,5,13,8,24,16,17]))),De=()=>n.jsx(_e,{children:n.jsxs(H,{children:[n.jsx(i,{path:"/",element:n.jsx(o.Suspense,{fallback:n.jsx("div",{children:"Loading..."}),children:n.jsx(Ie,{})})}),n.jsx(i,{path:"/registration",element:n.jsx(o.Suspense,{fallback:n.jsx("div",{children:"Loading..."}),children:n.jsx($,{children:n.jsx(Ce,{})})})}),n.jsx(i,{path:"/login",element:n.jsx(o.Suspense,{fallback:n.jsx("div",{children:"Loading..."}),children:n.jsx($,{children:n.jsx(Ae,{})})})}),n.jsx(i,{path:"/dashboard",element:n.jsx(o.Suspense,{fallback:n.jsx("div",{children:"Loading..."}),children:n.jsx(p,{children:n.jsx(Te,{})})})}),n.jsx(i,{path:"/manager",element:n.jsx(o.Suspense,{fallback:n.jsx("div",{children:"Loading..."}),children:n.jsx(p,{children:n.jsx(ke,{})})})}),n.jsx(i,{path:"/tests",element:n.jsx(o.Suspense,{fallback:n.jsx("div",{children:"Loading..."}),children:n.jsx(p,{children:n.jsx(Re,{})})})}),n.jsx(i,{path:"/test/:sessionId",element:n.jsx(o.Suspense,{fallback:n.jsx("div",{children:"Loading..."}),children:n.jsx(p,{children:n.jsx(ve,{})})})}),n.jsx(i,{path:"/test-results/:sessionId",element:n.jsx(o.Suspense,{fallback:n.jsx("div",{children:"Loading..."}),children:n.jsx(p,{children:n.jsx(Le,{})})})}),n.jsx(i,{path:"/*",element:n.jsx("div",{children:"Olympiad Home"})})]})}),Qe=Object.freeze(Object.defineProperty({__proto__:null,default:De},Symbol.toStringTag,{value:"Module"}));export{Qe as O,Z as a,w as b,Oe as c,S as d,E as e,h as f,Fe as g,_ as h,C as i,T as j,I as k,f as l,k as m,R as n,Se as o,v as p,L as q,A as r,$e as s,qe as t,j as u,ze as v,Ue as w,be as x};
