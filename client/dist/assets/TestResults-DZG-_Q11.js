import{o as b,j as t,f as W,c as M,r as E,ao as o,cW as e,bp as i,ar as r,cY as d,dC as Q,bj as L}from"./index-CWPAtMRT.js";import{u as H,T as w}from"./useTestSessionManager-OPsabaX4.js";import{f as S}from"./dateUtils-CDTve7xg.js";import{C as k}from"./Container-D7Kqj5xH.js";import{A as p}from"./ArrowBack-Bn_KyZo2.js";import{D as T}from"./Divider-DGSKBwkV.js";import{Q as P}from"./QuizOutlined-BWWHIyni.js";import"./OlympiadRoutes-DStoIL9r.js";import"./useOlympiadStore-ErJtcenK.js";const V=b(t.jsx("path",{d:"m18 9-1.41-1.42L10 14.17l-2.59-2.58L6 13l4 4zm1-6h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-.14 0-.27.01-.4.04-.39.08-.74.28-1.01.55-.18.18-.33.4-.43.64-.1.23-.16.49-.16.77v14c0 .27.06.54.16.78s.25.45.43.64c.27.27.62.47 1.01.55.13.02.26.03.4.03h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7-.25c.41 0 .75.34.75.75s-.34.75-.75.75-.75-.34-.75-.75.34-.75.75-.75M19 19H5V5h14z"}),"AssignmentTurnedInOutlined"),q=b(t.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8z"}),"CheckCircleOutlined"),G=b(t.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"ErrorOutlined"),u=o(i)(({theme:n})=>({minHeight:"100vh",backgroundImage:"linear-gradient(135deg, #1A2751 0%, #13203f 100%)",paddingTop:n.spacing(4),paddingBottom:n.spacing(6)})),j=o(e.div)(({theme:n})=>({backgroundColor:"#fff",borderRadius:24,padding:n.spacing(4,5),marginBottom:n.spacing(3),boxShadow:"0 12px 36px rgba(0, 0, 0, 0.12)"})),N=o(e.div)(({theme:n})=>({backgroundColor:"#fff",borderRadius:20,padding:n.spacing(3),marginBottom:n.spacing(2),boxShadow:"0 8px 24px rgba(0, 0, 0, 0.08)"})),Y=o(i)(({theme:n})=>({display:"flex",flexDirection:"column",alignItems:"center",padding:n.spacing(4,2),borderRadius:16,backgroundColor:"rgba(26, 39, 81, 0.03)"})),g=o(i)(({theme:n})=>({display:"flex",alignItems:"center",marginBottom:n.spacing(2),"&:last-child":{marginBottom:0}})),y=o(L)(({theme:n})=>({borderRadius:14,padding:n.spacing(1.2,3),fontWeight:600,textTransform:"none",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)","&:hover":{boxShadow:"0 6px 16px rgba(0, 0, 0, 0.16)"}})),nt=()=>{const{sessionId:n}=W(),c=M(),{currentSession:a,loading:A,error:f,getExamSession:v}=H();E.useEffect(()=>{if(!n){c("/olympiad/dashboard");return}v(parseInt(n))},[n,v,c]);const l=()=>{c("/olympiad/dashboard")};if(A||!a)return t.jsx(u,{display:"flex",justifyContent:"center",alignItems:"center",children:t.jsx(e.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:t.jsx(i,{sx:{textAlign:"center",color:"white",p:3},children:t.jsx(r,{variant:"h5",gutterBottom:!0,children:"Загрузка результатов..."})})})});if(f)return t.jsx(u,{children:t.jsx(k,{maxWidth:"md",children:t.jsx(e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:t.jsxs(j,{children:[t.jsx(r,{variant:"h5",color:"error",gutterBottom:!0,children:"Ошибка при загрузке результатов"}),t.jsx(r,{variant:"body1",paragraph:!0,children:f}),t.jsx(y,{variant:"contained",color:"primary",startIcon:t.jsx(p,{}),onClick:l,children:"Вернуться на главную"})]})})})});const x=a.examData.questions.length,C=new Set(a.examData.studentAnswer.map(s=>s.questionId)),m=C.size,R=Math.round(m/x*100),z=new Map(a.examData.studentAnswer.map(s=>[s.questionId,s.selectedOptionId]));return t.jsx(u,{children:t.jsxs(k,{maxWidth:"lg",children:[t.jsx(e.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:t.jsx(y,{variant:"contained",sx:{mb:3,backgroundColor:"rgba(255, 255, 255, 0.9)",color:"#1A2751"},startIcon:t.jsx(p,{}),onClick:l,children:"Вернуться на главную"})}),t.jsx(e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:t.jsx(j,{children:t.jsxs(d,{container:!0,spacing:3,children:[t.jsxs(d,{item:!0,xs:12,children:[t.jsxs(i,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[t.jsx(r,{variant:"h4",fontWeight:"bold",children:"Результаты теста"}),t.jsx(Q,{icon:t.jsx(V,{}),label:"Завершен",color:"success",variant:"outlined",sx:{borderRadius:3,p:.5}})]}),t.jsx(r,{variant:"h5",color:"primary",gutterBottom:!0,children:a.examData.nameRus}),t.jsx(T,{sx:{my:2}})]}),t.jsx(d,{item:!0,xs:12,md:8,children:t.jsxs(i,{mb:4,children:[t.jsxs(g,{children:[t.jsx(w,{sx:{mr:1.5,color:"text.secondary"}}),t.jsxs(i,{children:[t.jsx(r,{variant:"body2",color:"text.secondary",children:"Время начала"}),t.jsx(r,{variant:"body1",children:S(a.startTime)})]})]}),t.jsxs(g,{children:[t.jsx(w,{sx:{mr:1.5,color:"text.secondary"}}),t.jsxs(i,{children:[t.jsx(r,{variant:"body2",color:"text.secondary",children:"Время завершения"}),t.jsx(r,{variant:"body1",children:S(a.endTime)})]})]}),t.jsxs(g,{children:[t.jsx(P,{sx:{mr:1.5,color:"text.secondary"}}),t.jsxs(i,{children:[t.jsx(r,{variant:"body2",color:"text.secondary",children:"Отвечено вопросов"}),t.jsxs(r,{variant:"body1",children:[m," из ",x," (",R,"%)"]})]})]})]})}),t.jsx(d,{item:!0,xs:12,md:4,children:t.jsxs(Y,{children:[t.jsxs(r,{variant:"h2",color:"primary",fontWeight:"bold",children:[m,"/",x]}),t.jsx(r,{variant:"body1",color:"text.secondary",children:"Отвеченные вопросы"})]})})]})})}),t.jsx(e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:t.jsxs(j,{children:[t.jsx(r,{variant:"h5",gutterBottom:!0,children:"Детали теста"}),t.jsx(T,{sx:{mb:3,mt:1}}),a.examData.questions.map((s,I)=>{const D=z.get(s.id),B=C.has(s.id),h=s.options.find(O=>O.id===D);return t.jsx(N,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:I*.1},children:t.jsxs(i,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[t.jsxs(i,{flex:1,children:[t.jsxs(r,{variant:"subtitle1",fontWeight:"500",gutterBottom:!0,children:["Вопрос ",I+1,": ",s.questionRus]}),B?t.jsxs(i,{mt:1.5,children:[t.jsx(r,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Ваш ответ:"}),t.jsx(r,{variant:"body1",fontWeight:"500",children:(h==null?void 0:h.nameRus)||"Не найден вариант ответа"})]}):t.jsx(r,{variant:"body2",color:"text.secondary",mt:1.5,children:"Вы не ответили на этот вопрос"})]}),t.jsx(i,{ml:2,children:B?t.jsx(q,{color:"success",fontSize:"large"}):t.jsx(G,{color:"error",fontSize:"large"})})]})},s.id)}),t.jsx(i,{display:"flex",justifyContent:"center",mt:4,children:t.jsx(y,{variant:"contained",color:"primary",startIcon:t.jsx(p,{}),onClick:l,size:"large",children:"Вернуться на главную"})})]})})]})})};export{nt as default};
